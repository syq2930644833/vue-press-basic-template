# 基础

## 响应式系统

Vue的响应式系统是其核心特性之一，它能够确保在应用状态发生改变时，UI可以自动更新。

![](https://v2.cn.vuejs.org/images/data.png)

1. **数据劫持**. 当你将一个普通JS对象传给一个vue实例作为其 **`data`** 选项时，Vue会遍历该对象所有属性，并使用 **`Object.defineProperty`** 将它们转化为 **`getter/setter`** 。
并在内部跟踪相关依赖，在属性被访问或修改时通知变化。
    - `Object.defineProperty` 是 ES5 中一个无法 shim 的特性，这也就是 Vue 不支持 IE8 以及更低版本浏览器的原因。

2. **依赖收集**. 在第一次渲染或者对其他数据的访问中，当某个属性被访问时，**`getter`**被触发。此时，Vue会记住当前正在使用的属性并**观察**该属性的依赖。
    - 在get函数中通过 **`dep.depend`** 做依赖收集。

3. **观察者模式**. Vue的响应式系统使用的是观察者模式。每个数据属性都有一个对应的观察者对象(Dep)存储所有依赖该属性的东西。当数据属性改变时，它的 **`setter`** 会被触发，进而通知所有关联的观察者进行更新。

4. **批量异步更新**. 为了避免频繁的、不必要的DOM操作或计算，Vue 在更新 DOM 时是异步执行的。只要侦听到数据变化，Vue 将开启一个队列，并缓冲在同一事件循环中发生的所有数据变更。如果同一属性被多次修改(如果同一个 watcher 被多次触发)，它只会被推入到队列中一次。然后，在下一个事件循环“tick”中，Vue 刷新队列并执行实际（已去重的）工作。

5. **计算属性和侦听器**. 为了提供更细粒度的数据响应控制，Vue 提供了计算属性 **`computed`** 和侦听器 **`watch`**。计算属性允许你基于其他属性计算和缓存值，而侦听器允许你对单独的数据属性的变化做出响应。

## 双向数据绑定

1. 是一种特殊的绑定方法，它不仅允许数据影响视图（单向数据流），还允许视图影响数据。

    即当一个数据发生变化时，视图随之更新；而当用户在视图中修改了数据时，模型也会相应地更新。

2. 双向数据绑定通常与 v-model 指令相关，常用于表单元素。
3. `v-model` 实际上是 `v-bind`（绑定属性）和 `v-on:input`（监听输入事件）的语法糖。

## 响应式系统跟双向数据绑定的关系

可以理解为：响应式数据系统是Vue中数据和视图同步的核心，而双向数据绑定是这个系统的一个特定应用，它允许视图也能反过来影响数据。
